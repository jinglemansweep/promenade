# Simple Prometheus Dashboard Example
# Minimal configuration with basic metrics

title: "Home Lab"
refresh_interval: 30  # Refresh all metrics every 10 seconds
grid_rows: 6
grid_columns: 6

widgets:

  # ROW 0

  - title: "UDM SE"
    subtitle: "Ping"
    query: probe_success{instance="10.1.1.1"}
    format_string: "'UP' if value else 'DOWN'"
    row: 0
    column: 0
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value == 1"
        border_color: "$success"
      - condition: "value == 0"
        border_color: "$error"

  - title: "Switch Rack"
    subtitle: "Ping"
    query: probe_success{instance="10.1.1.11"}
    format_string: "'UP' if value else 'DOWN'"
    row: 0
    column: 1
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value == 1"
        border_color: "$success"
      - condition: "value == 0"
        border_color: "$error"

  - title: "Switch Lounge"
    subtitle: "Ping"
    query: probe_success{instance="10.1.1.12"}
    format_string: "'UP' if value else 'DOWN'"
    row: 0
    column: 2
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value == 1"
        border_color: "$success"
      - condition: "value == 0"
        border_color: "$error"

  - title: "WAN Download"
    subtitle: "Speed"
    type: sparkline
    query: homeassistant_sensor_data_rate_mbit_per_s{entity="sensor.speedtest_download"}
    format_string: "{value:.0f}Mbs"
    row: 0
    column: 3
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value >= 500"
        border_color: "$success"
      - condition: "value < 500"
        border_color: "$error"

  - title: "WAN Upload"
    subtitle: "Speed"
    type: sparkline
    query: homeassistant_sensor_data_rate_mbit_per_s{entity="sensor.speedtest_upload"}
    format_string: "{value:.0f}Mbs"
    row: 0
    column: 4
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value >= 500"
        border_color: "$success"
      - condition: "value < 500"
        border_color: "$error"

  - title: "NAS Volume"
    subtitle: "Used"
    type: sparkline
    query: homeassistant_sensor_unit_percent{entity="sensor.ds920plus_volume_used"}
    format_string: "{value:.0f}%"
    row: 0
    column: 5
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value <= 80"
        border_color: "$success"
      - condition: "value > 80"
        border_color: "$error"

  # ROW 1

  - title: "DS920+"
    subtitle: "Ping"
    query: probe_success{instance="ds920p.adm.ptre.es"}
    format_string: "'UP' if value else 'DOWN'"
    row: 1
    column: 0
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value == 1"
        border_color: "$success"
      - condition: "value == 0"
        border_color: "$error"

  - title: "PVM1"
    subtitle: "Ping"
    query: probe_success{instance="pvm1.adm.ptre.es"}
    format_string: "'UP' if value else 'DOWN'"
    row: 1
    column: 1
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value == 1"
        border_color: "$success"
      - condition: "value == 0"
        border_color: "$error"

  - title: "PVM2"
    subtitle: "Ping"
    query: probe_success{instance="pvm2.adm.ptre.es"}
    format_string: "'UP' if value else 'DOWN'"
    row: 1
    column: 2
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value == 1"
        border_color: "$success"
      - condition: "value == 0"
        border_color: "$error"

  - title: "PVM3"
    subtitle: "Ping"
    query: probe_success{instance="pvm3.adm.ptre.es"}
    format_string: "'UP' if value else 'DOWN'"
    row: 1
    column: 3
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value == 1"
        border_color: "$success"
      - condition: "value == 0"
        border_color: "$error"

  - title: "Jetson"
    subtitle: "Ping"
    query: probe_success{instance="jetson.adm.ptre.es"}
    format_string: "'UP' if value else 'DOWN'"
    row: 1
    column: 4
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value == 1"
        border_color: "$success"
      - condition: "value == 0"
        border_color: "$error"

  - title: "Dev"
    subtitle: "Ping"
    query: probe_success{instance="dev.adm.ptre.es"}
    format_string: "'UP' if value else 'DOWN'"
    row: 1
    column: 5
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value == 1"
        border_color: "$success"
      - condition: "value == 0"
        border_color: "$error"

  # ROW 2

  - title: "Decks"
    subtitle: "Ping"
    query: probe_success{instance="decks.adm.ptre.es"}
    format_string: "'UP' if value else 'DOWN'"
    row: 2
    column: 0
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value == 1"
        border_color: "$success"
      - condition: "value == 0"
        border_color: "$error"

  - title: "WideBoy"
    subtitle: "Ping"
    query: probe_success{instance="wideboy.adm.ptre.es"}
    format_string: "'UP' if value else 'DOWN'"
    row: 2
    column: 1
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value == 1"
        border_color: "$success"
      - condition: "value == 0"
        border_color: "$error"

  # ROW 3

  # ROW 4

  - title: "Home Assistant"
    subtitle: "HTTP"
    query: probe_success{instance="http://hass.adm.ptre.es:8123"}
    format_string: "'HTTP OK' if value else 'HTTP FAIL {value}'"
    row: 4
    column: 0
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value == 1"
        border_color: "$success"
      - condition: "value == 0"
        border_color: "$error"

  - title: "Plex"
    subtitle: "HTTP"
    query: probe_success{instance="http://plex.adm.ptre.es:32400"}
    format_string: "'HTTP OK' if value else 'HTTP FAIL'"
    row: 4
    column: 1
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value == 1"
        border_color: "$success"
      - condition: "value == 0"
        border_color: "$error"

  - title: "DW1 Load Avg"
    subtitle: "Load"
    type: sparkline
    query: node_load1{instance="dw1.svc.ptre.es:9100"}
    format_string: "{value:.2f}"
    sparkline_summary: mean
    row: 4
    column: 4
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value > 1"
        border_color: "$error"
      - condition: "value <= 1"
        border_color: "$success"

  - title: "DW1 RAM Free"
    subtitle: "RAM"
    type: sparkline
    query: node_memory_MemFree_bytes{instance="dw1.svc.ptre.es:9100"} / 1e+9
    format_string: "{value:.2f}"
    sparkline_summary: mean
    row: 4
    column: 5
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value > 1"
        border_color: "$error"
      - condition: "value <= 1"
        border_color: "$success"

# Simple Prometheus Dashboard Example
# Minimal configuration with basic metrics

title: "Home Lab"
refresh_interval: 30  # Refresh all metrics every 10 seconds
grid_rows: 7
grid_columns: 6

widgets:

  - title: "WAN"
    subtitle: "Download"
    type: sparkline
    query: homeassistant_sensor_data_rate_mbit_per_s{entity="sensor.speedtest_download"}
    format_string: "{value:.0f}Mbs"
    row: 0
    column: 4
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value >= 500"
        border_color: "$success"
      - condition: "value < 500"
        border_color: "$error"

  - title: "WAN"
    subtitle: "Upload"
    type: sparkline
    query: homeassistant_sensor_data_rate_mbit_per_s{entity="sensor.speedtest_upload"}
    format_string: "{value:.0f}Mbs"
    row: 0
    column: 5
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value >= 500"
        border_color: "$success"
      - condition: "value < 500"
        border_color: "$error"

  - title: "NAS"
    subtitle: "Used"
    type: sparkline
    query: homeassistant_sensor_unit_percent{entity="sensor.ds920plus_volume_used"}
    format_string: "{value:.0f}%"
    row: 1
    column: 4
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value <= 80"
        border_color: "$success"
      - condition: "value > 80"
        border_color: "$error"

  - title: "NAS"
    subtitle: "Temperature"
    type: sparkline
    query: homeassistant_sensor_temperature_celsius{entity="sensor.ds920plus_temperature"}
    format_string: "{value:.0f}°C"
    row: 1
    column: 5
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value <= 50"
        border_color: "$success"
      - condition: "value > 50"
        border_color: "$error"

  - title: "Rack"
    subtitle: "Temperature"
    type: sparkline
    query: homeassistant_sensor_temperature_celsius{entity="sensor.rack_temperature_sensor_temperature"}
    format_string: "{value:.0f}°C"
    row: 2
    column: 4
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value > 30"
        border_color: "$error"
      - condition: "value <= 30"
        border_color: "$success"
  
  # PING

  - title: "UDM SE"
    subtitle: "Ping"
    type: sparkline
    query: probe_icmp_duration_seconds{instance="10.1.1.1",phase="rtt"}*1000
    format_string: "{value:.2f}ms"
    row: 0
    column: 0
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value <= 10"
        border_color: "$success"
      - condition: "value == 0 or value > 10"
        border_color: "$error"

  - title: "Switch Rack"
    subtitle: "Ping"
    type: sparkline
    query: probe_icmp_duration_seconds{instance="10.1.1.11",phase="rtt"}*1000
    format_string: "{value:.2f}ms"
    row: 0
    column: 1
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value <= 10"
        border_color: "$success"
      - condition: "value == 0 or value > 10"
        border_color: "$error"

  - title: "Switch Lounge"
    subtitle: "Ping"
    type: sparkline
    query: probe_icmp_duration_seconds{instance="10.1.1.12",phase="rtt"}*1000
    format_string: "{value:.2f}ms"
    row: 0
    column: 2
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value <= 10"
        border_color: "$success"
      - condition: "value == 0 or value > 10"
        border_color: "$error"

  - title: "PVM1"
    subtitle: "Ping"
    type: sparkline
    query: probe_icmp_duration_seconds{instance="pvm1.adm.ptre.es",phase="rtt"}*1000
    format_string: "{value:.2f}ms"
    row: 1
    column: 0
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value <= 10"
        border_color: "$success"
      - condition: "value == 0 or value > 10"
        border_color: "$error"

  - title: "PVM2"
    subtitle: "Ping"
    type: sparkline
    query: probe_icmp_duration_seconds{instance="pvm2.adm.ptre.es",phase="rtt"}*1000
    format_string: "{value:.2f}ms"
    row: 1
    column: 1
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value <= 10"
        border_color: "$success"
      - condition: "value == 0 or value > 10"
        border_color: "$error"

  - title: "PVM3"
    subtitle: "Ping"
    type: sparkline
    query: probe_icmp_duration_seconds{instance="pvm3.adm.ptre.es",phase="rtt"}*1000
    format_string: "{value:.2f}ms"
    row: 1
    column: 2
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value <= 10"
        border_color: "$success"
      - condition: "value == 0 or value > 10"
        border_color: "$error"

  - title: "DM1"
    subtitle: "Ping"
    type: sparkline
    query: probe_icmp_duration_seconds{instance="dm1.svc.ptre.es",phase="rtt"}*1000
    format_string: "{value:.2f}ms"
    row: 2
    column: 0
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value <= 10"
        border_color: "$success"
      - condition: "value == 0 or value > 10"
        border_color: "$error"

  - title: "DM2"
    subtitle: "Ping"
    type: sparkline
    query: probe_icmp_duration_seconds{instance="dm2.svc.ptre.es",phase="rtt"}*1000
    format_string: "{value:.2f}ms"
    row: 2
    column: 1
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value <= 10"
        border_color: "$success"
      - condition: "value == 0 or value > 10"
        border_color: "$error"

  - title: "Dev"
    subtitle: "Ping"
    type: sparkline
    query: probe_icmp_duration_seconds{instance="dev.adm.ptre.es",phase="rtt"}*1000
    format_string: "{value:.2f}ms"
    row: 2
    column: 2
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value <= 10"
        border_color: "$success"
      - condition: "value == 0 or value > 10"
        border_color: "$error"

  - title: "DW1"
    subtitle: "Ping"
    type: sparkline
    query: probe_icmp_duration_seconds{instance="dw1.svc.ptre.es",phase="rtt"}*1000
    format_string: "{value:.2f}ms"
    row: 3
    column: 0
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value <= 10"
        border_color: "$success"
      - condition: "value == 0 or value > 10"
        border_color: "$error"

  - title: "DW2"
    subtitle: "Ping"
    type: sparkline
    query: probe_icmp_duration_seconds{instance="dw2.svc.ptre.es",phase="rtt"}*1000
    format_string: "{value:.2f}ms"
    row: 3
    column: 1
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value <= 10"
        border_color: "$success"
      - condition: "value == 0 or value > 10"
        border_color: "$error"

  - title: "DW3"
    subtitle: "Ping"
    type: sparkline
    query: probe_icmp_duration_seconds{instance="dw3.svc.ptre.es",phase="rtt"}*1000
    format_string: "{value:.2f}ms"
    row: 3
    column: 2
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value <= 10"
        border_color: "$success"
      - condition: "value == 0 or value > 10"
        border_color: "$error"

  - title: "DS920+"
    subtitle: "Ping"
    type: sparkline
    query: probe_icmp_duration_seconds{instance="ds920p.adm.ptre.es",phase="rtt"}*1000
    format_string: "{value:.2f}ms"
    row: 4
    column: 0
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value <= 10"
        border_color: "$success"
      - condition: "value == 0 or value > 10"
        border_color: "$error"

  - title: "Jetson"
    subtitle: "Ping"
    type: sparkline
    query: probe_icmp_duration_seconds{instance="jetson.adm.ptre.es",phase="rtt"}*1000
    format_string: "{value:.2f}ms"
    row: 4
    column: 1
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value <= 10"
        border_color: "$success"
      - condition: "value == 0 or value > 10"
        border_color: "$error"

  - title: "Hue Hub"
    subtitle: "Ping"
    type: sparkline
    query: probe_icmp_duration_seconds{instance="huehub.adm.ptre.es",phase="rtt"}*1000
    format_string: "{value:.2f}ms"
    row: 4
    column: 2
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value <= 10"
        border_color: "$success"
      - condition: "value == 0 or value > 10"
        border_color: "$error"

  - title: "IPNet VPS"
    subtitle: "Ping"
    type: sparkline
    query: probe_icmp_duration_seconds{instance="ipnt.uk",phase="rtt"}*1000
    format_string: "{value:.2f}ms"
    row: 6
    column: 4
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value <= 30"
        border_color: "$success"
      - condition: "value == 0 or value > 30"
        border_color: "$error"

  # HTTP

  - title: "Home Assistant"
    subtitle: "HTTP"
    query: probe_http_status_code{instance="http://hass.adm.ptre.es:8123"}
    format_string: "'UP' if value else 'DOWN'"
    row: 6
    column: 0
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value == 200"
        border_color: "$success"
      - condition: "value != 200"
        border_color: "$error"

  - title: "Plex"
    subtitle: "HTTP"
    query: probe_http_status_code{instance="http://plex.adm.ptre.es:32400"}
    format_string: "'UP' if value else 'DOWN'"
    row: 6
    column: 1
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value == 401"
        border_color: "$success"
      - condition: "value != 401"
        border_color: "$error"

  - title: "IPNet Site"
    subtitle: "HTTP"
    query: probe_success{instance="https://ipnt.uk"}
    format_string: "'UP' if value else 'DOWN'"
    row: 6
    column: 5
    row_span: 1
    column_span: 1
    conditional_formats:
      - condition: "value == 1"
        border_color: "$success"
      - condition: "value == 0"
        border_color: "$error"


